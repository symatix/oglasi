{"version":3,"sources":["reducers/index.js","reducers/uiReducer.js","reducers/fileReducer.js","constants.js","components/Admin/Form.js","components/Admin/ImageCard.js","components/Admin/Admin.js","components/Board/Board.js","components/App/App.js","actions/index.js","index.js"],"names":["combineReducers","ui","state","arguments","length","undefined","type","files","action","payload","Object","toConsumableArray","concat","filter","file","_id","Form","props","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","handleFile","bind","assertThisInitialized","e","FormData","set","target","axios","post","headers","Content-Type","Accept","console","log","value","classes","react_default","a","createElement","accept","className","input","id","name","onChange","htmlFor","Button_default","variant","component","button","Component","withStyles","theme","margin","spacing","unit","display","ImageCard","handleDelete","delete","_this$props","path","Grid_default","item","xs","sm","lg","Card_default","card","CardHeader_default","IconButton_default","onClick","Delete_default","CardMedia_default","media","image","React","maxWidth","height","paddingTop","root","flexGrow","Admin_Form","container","map","f","Admin_ImageCard","assign","key","width","img","Board","index","_this2","interval","setInterval","setState","clearInterval","style","src","alt","renderImg","App","route","window","location","pathname","endpoint","getFiles","socketIOClient","on","Child","Admin","connect","_ref","asyncToGenerator","regenerator_default","mark","_callee","dispatch","res","wrap","_context","prev","next","get","sent","data","stop","_x","apply","store","createStore","reducers","applyMiddleware","reduxThunk","ReactDOM","render","es","components_App_App","document","getElementById"],"mappings":"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","file":"static/js/main.ebcb3870.chunk.js","sourcesContent":["import { combineReducers } from 'redux';\r\nimport fileReducer from './fileReducer';\r\nimport uiReducer from './uiReducer';\r\n\r\nexport default combineReducers({\r\n   ui: uiReducer,\r\n   files: fileReducer\r\n})","//import { } from '../constants';\r\n\r\nexport default function (state = {}, action) {\r\n\r\n   switch (action.type) {\r\n\r\n      default:\r\n         return state\r\n   }\r\n}","import {ADD_FILE, DELETE_FILE, GET_FILES } from '../constants';\r\n\r\nexport default function (state = [], action) {\r\n\r\n   switch (action.type) {\r\n      case GET_FILES:\r\n            return action.payload;\r\n\r\n      case ADD_FILE:\r\n      return [ ...state, action.payload ];\r\n\r\n      case DELETE_FILE:\r\n         return state.filter(file => file._id !== action.payload._id);\r\n\r\n      default:\r\n         return state;\r\n   }\r\n}","export const ADD_FILE = 'ADD_FILE';\r\nexport const DELETE_FILE = 'DELETE_FILE';\r\nexport const GET_FILES = 'GET_FILES';","import React, { Component } from 'react';\r\nimport axios from 'axios';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Button from '@material-ui/core/Button';\r\n\r\nconst styles = theme => ({\r\n   button: {\r\n      margin: theme.spacing.unit,\r\n   },\r\n   input: {\r\n      display: 'none',\r\n   },\r\n});\r\n\r\n\r\nclass Form extends Component {\r\n   constructor(props) {\r\n      super(props);\r\n      this.handleFile = this.handleFile.bind(this);\r\n   }\r\n\r\n   handleFile(e) {\r\n      const file = new FormData();\r\n      file.set('file', e.target.files[0])\r\n      axios.post('/api/file', file, {\r\n         headers: {\r\n            'Content-Type': 'multipart/form-data',\r\n            'Accept': 'application/json',\r\n            'type': \"formData\"\r\n         }\r\n      });\r\n   }\r\n\r\n   handleTime(e){\r\n      console.log(e.target.value)\r\n   }\r\n\r\n   render() {\r\n      const { classes } = this.props;\r\n      return (\r\n         <div>\r\n            <input\r\n               accept=\"image/*\"\r\n               className={classes.input}\r\n               id=\"contained-button-file\"\r\n               type=\"file\"\r\n               name=\"file\"\r\n               onChange={this.handleFile}\r\n            />\r\n            <label htmlFor=\"contained-button-file\">\r\n               <Button\r\n                  variant=\"contained\"\r\n                  component=\"span\"\r\n                  className={classes.button}>\r\n                  Upload\r\n               </Button>\r\n            </label>\r\n         </div>\r\n      );\r\n   }\r\n}\r\n\r\nForm.propTypes = {\r\n   classes: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default withStyles(styles)(Form);\r\n\r\n\r\n","import React from 'react';\r\nimport axios from 'axios';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Card from '@material-ui/core/Card';\r\nimport CardHeader from '@material-ui/core/CardHeader';\r\nimport CardMedia from '@material-ui/core/CardMedia';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Delete from '@material-ui/icons/Delete';\r\n\r\nconst styles = theme => ({\r\n   card: {\r\n      maxWidth: 400,\r\n   },\r\n   media: {\r\n      height: 0,\r\n      paddingTop: '56.25%', // 16:9\r\n   }\r\n});\r\n\r\nclass ImageCard extends React.Component {\r\n\r\n   handleDelete = () => {\r\n      const { _id } = this.props;\r\n      axios.delete(`/api/file/${_id}`);\r\n   };\r\n\r\n  render() {\r\n    const { classes, path } = this.props;\r\n\r\n    return (\r\n      <Grid item xs={12} sm={4} lg={3}>\r\n         <Card className={classes.card}>\r\n            <CardHeader\r\n               action={\r\n                  <IconButton onClick={this.handleDelete}>\r\n                     <Delete />\r\n                  </IconButton>\r\n               }\r\n            />\r\n            <CardMedia\r\n               className={classes.media}\r\n               image={path}\r\n            />\r\n         </Card>\r\n      </Grid>\r\n    );\r\n  }\r\n}\r\n\r\nImageCard.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n  path: PropTypes.string.isRequired,\r\n  fs_path: PropTypes.string.isRequired,\r\n  _id: PropTypes.string.isRequired\r\n};\r\n\r\nexport default withStyles(styles)(ImageCard);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withStyles } from '@material-ui/core/styles';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Form from './Form';\r\nimport ImageCard from './ImageCard';\r\n\r\nconst styles = theme => ({\r\n   root: {\r\n     flexGrow: 1,\r\n   }\r\n });\r\n\r\nconst Admin = props => {\r\n   const renderImages = () => {\r\n      if(props.files){\r\n         return props.files.map(f => <ImageCard key={f._id} {...f}/>)\r\n      }\r\n      return null;\r\n   }\r\n\r\n   return (\r\n      <div>\r\n         <Form />\r\n         <Grid container className={props.classes.root} spacing={8}>\r\n            {renderImages()}\r\n         </Grid>\r\n      </div>\r\n   );\r\n}\r\n\r\nAdmin.propTypes = {\r\n   classes: PropTypes.object.isRequired,\r\n };\r\n \r\nexport default withStyles(styles)(Admin);\r\n","import React from 'react';\r\n\r\nconst root = {\r\n   display: 'block',\r\n   margin: '0 auto',\r\n   height: '100%',\r\n   width: '100%'\r\n}\r\n\r\nconst img = {\r\n\theight: '100vh',\r\n\twidth: 'auto'\r\n}\r\n\r\nclass Board extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = { index: 0 };\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.interval = setInterval(() => {\r\n\t\t\tif (this.state.index < this.props.files.length - 1) {\r\n\t\t\t\tthis.setState((state, props) => ({ index: state.index + 1 }));\r\n\t\t\t} else {\r\n\t\t\t\tthis.setState({ index: 0 });\r\n\t\t\t}\r\n\t\t}, 180000);\r\n   }\r\n   \r\n\tcomponentWillUnmount() {\r\n\t\tclearInterval(this.interval);\r\n\t}\r\n\r\n   renderImg(){\r\n      if (this.props.files.length > 0){\r\n         const { files } = this.props;\r\n         const { index } = this.state;\r\n         return <img style={img} src={files[index].path} alt=\"bulletin board\" />\r\n      }\r\n      return 'No image present';\r\n   }\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div style={root}>\r\n            {this.renderImg()}\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default Board;","import React, {Component} from 'react';\r\nimport { connect } from 'react-redux';\r\nimport socketIOClient from \"socket.io-client\";\r\nimport Admin from '../Admin/Admin';\r\nimport Board from '../Board/Board';\r\nimport { getFiles } from '../../actions';\r\nimport './App.css';\r\n\r\nclass App extends Component {\r\n   constructor(props){\r\n      super(props);\r\n      this.state = { \r\n         route: window.location.pathname, \r\n         endpoint: \"http://127.0.0.1:7000\"\r\n      }\r\n   }\r\n\r\n   componentDidMount(){\r\n      this.props.getFiles();\r\n      const { endpoint } = this.state;\r\n      const socket = socketIOClient(endpoint);\r\n      socket.on(\"update\", () => this.props.getFiles());\r\n   }\r\n\r\n   render() {\r\n      const { files } = this.props;\r\n      \r\n      let Child;\r\n      switch (this.state.route) {\r\n         case '/admin': \r\n            Child = Admin\r\n            break;\r\n         default:\r\n            Child = Board;\r\n      }\r\n\r\n      return (\r\n         <div className=\"App\">\r\n            <Child files={files} />\r\n         </div>\r\n      );\r\n   }\r\n}\r\n\r\nconst mapStateToProps = ({ files }) => ({ files });\r\n\r\nexport default connect(mapStateToProps, { getFiles })(App);","import * as constants from '../constants';\r\nimport axios from 'axios';\r\n\r\nexport const getFiles = () => async dispatch => {\r\n   const res = await axios.get('/api/files');\r\n   dispatch({ type: constants.GET_FILES, payload: res.data})\r\n}","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport {Provider} from 'react-redux';\r\nimport {createStore, applyMiddleware} from 'redux';\r\nimport reduxThunk from 'redux-thunk';\r\nimport reducers from './reducers'\r\nimport './index.css';\r\nimport App from './components/App/App';\r\n\r\nconst store = createStore(reducers, {}, applyMiddleware(reduxThunk))\r\n\r\nReactDOM.render(\r\n   <Provider store={store}>\r\n      <App/>\r\n   </Provider>, document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}